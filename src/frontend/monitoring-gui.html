<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUCO ç³»çµ±ç›£æ§ä¸­å¿ƒ - GUI Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
            --bg-dark: #111827;
            --card-bg: #1f2937;
            --border: #374151;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Microsoft JhengHei', sans-serif;
            background: var(--bg-dark);
            color: white;
            overflow-x: auto;
        }

        /* é ‚éƒ¨æ¨™é¡Œæ¬„ */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-bar {
            display: flex;
            gap: 20px;
            align-items: center;
            font-size: 14px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.online { background: var(--success); }
        .status-dot.warning { background: var(--warning); }
        .status-dot.error { background: var(--danger); }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ä¸»è¦å…§å®¹å€åŸŸ */
        .container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ç¶²æ ¼ä½ˆå±€ */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .grid-wide {
            grid-column: 1 / -1;
        }

        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary {
            background: var(--border);
            color: #d1d5db;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        /* çµ±è¨ˆæ•¸å­— */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #9ca3af;
        }

        .stat-change {
            font-size: 11px;
            margin-top: 5px;
        }

        .stat-change.positive { color: var(--success); }
        .stat-change.negative { color: var(--danger); }

        /* é€²åº¦æ¢ */
        .progress {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-bar.success { background: var(--success); }
        .progress-bar.warning { background: var(--warning); }
        .progress-bar.danger { background: var(--danger); }

        /* åˆ—è¡¨ */
        .list {
            max-height: 300px;
            overflow-y: auto;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-item-title {
            font-weight: 500;
        }

        .list-item-subtitle {
            font-size: 12px;
            color: #9ca3af;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge.success { background: var(--success); color: white; }
        .badge.warning { background: var(--warning); color: white; }
        .badge.danger { background: var(--danger); color: white; }
        .badge.secondary { background: var(--border); color: #d1d5db; }

        /* åœ–è¡¨å€åŸŸ */
        .chart-container {
            position: relative;
            height: 200px;
            margin: 15px 0;
        }

        .chart {
            width: 100%;
            height: 100%;
        }

        /* çµ‚ç«¯æ¨£å¼ */
        .terminal {
            background: #000;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
        }

        .terminal-line {
            margin: 2px 0;
        }

        .terminal-line.info { color: #60a5fa; }
        .terminal-line.success { color: var(--success); }
        .terminal-line.warning { color: var(--warning); }
        .terminal-line.error { color: var(--danger); }

        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 15px;
                flex-direction: column;
                gap: 10px;
            }
            
            .status-bar {
                flex-wrap: wrap;
                gap: 10px;
            }
        }

        /* å·¥å…·æç¤º */
        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* å…¨è¢å¹•åˆ‡æ› */
        .fullscreen-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- å…¨è¢å¹•åˆ‡æ›æŒ‰éˆ• -->
    <button class="fullscreen-toggle" onclick="toggleFullscreen()" title="åˆ‡æ›å…¨è¢å¹•">
        <span id="fullscreenIcon">â›¶</span>
    </button>

    <!-- é ‚éƒ¨ç‹€æ…‹æ¬„ -->
    <div class="header">
        <h1>
            <span>ğŸ­</span>
            FUCO ç³»çµ±ç›£æ§ä¸­å¿ƒ
        </h1>
        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot online"></div>
                <span>ç³»çµ±åœ¨ç·š</span>
            </div>
            <div class="status-item">
                <div class="status-dot online"></div>
                <span>API æ­£å¸¸</span>
            </div>
            <div class="status-item">
                <div class="status-dot warning"></div>
                <span>1 è­¦å‘Š</span>
            </div>
            <div class="status-item">
                <span id="currentTime"></span>
            </div>
            <div class="status-item">
                <span>é‹è¡Œæ™‚é–“: <span id="uptime">12:34:56</span></span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- ç³»çµ±æ¦‚è¦½ -->
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ“Š ç³»çµ±æ¦‚è¦½</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="refreshSystemStats()">
                            <span class="loading" id="systemLoading" style="display: none;"></span>
                            åˆ·æ–°
                        </button>
                    </div>
                </div>
                <div class="stat-grid">
                    <div class="stat-item tooltip" data-tooltip="CPU ä½¿ç”¨ç‡">
                        <div class="stat-value" style="color: var(--success);" id="cpuUsage">23%</div>
                        <div class="stat-label">CPU</div>
                        <div class="progress">
                            <div class="progress-bar success" style="width: 23%"></div>
                        </div>
                    </div>
                    <div class="stat-item tooltip" data-tooltip="è¨˜æ†¶é«”ä½¿ç”¨ç‡">
                        <div class="stat-value" style="color: var(--warning);" id="memoryUsage">67%</div>
                        <div class="stat-label">è¨˜æ†¶é«”</div>
                        <div class="progress">
                            <div class="progress-bar warning" style="width: 67%"></div>
                        </div>
                    </div>
                    <div class="stat-item tooltip" data-tooltip="ç£ç¢Ÿä½¿ç”¨ç‡">
                        <div class="stat-value" style="color: var(--success);" id="diskUsage">45%</div>
                        <div class="stat-label">ç£ç¢Ÿ</div>
                        <div class="progress">
                            <div class="progress-bar success" style="width: 45%"></div>
                        </div>
                    </div>
                    <div class="stat-item tooltip" data-tooltip="æ´»èºé€£ç·šæ•¸">
                        <div class="stat-value" style="color: var(--primary);" id="connections">12</div>
                        <div class="stat-label">é€£ç·šæ•¸</div>
                        <div class="stat-change positive">â†‘ +2</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸš€ API ç«¯é»ç‹€æ…‹</div>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="testAllEndpoints()">æ¸¬è©¦å…¨éƒ¨</button>
                    </div>
                </div>
                <div class="list" id="apiEndpoints">
                    <!-- å‹•æ…‹è¼‰å…¥ -->
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ“ˆ å³æ™‚æ•¸æ“š</div>
                </div>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--success);" id="todayProduction">1,847</div>
                        <div class="stat-label">ä»Šæ—¥ç”¢é‡</div>
                        <div class="stat-change positive">â†‘ +12.5%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--success);" id="qualityRate">96.2%</div>
                        <div class="stat-label">è‰¯å“ç‡</div>
                        <div class="stat-change positive">â†‘ +1.8%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--warning);" id="activeWorkstations">3</div>
                        <div class="stat-label">é‹è¡Œå·¥ä½œç«™</div>
                        <div class="stat-change">= 0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--primary);" id="activeOrders">8</div>
                        <div class="stat-label">é€²è¡Œä¸­å·¥å–®</div>
                        <div class="stat-change negative">â†“ -2</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å·¥ä½œç«™ç‹€æ…‹ -->
        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ–¥ï¸ å·¥ä½œç«™ç›£æ§</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="refreshWorkstations()">åˆ·æ–°</button>
                    </div>
                </div>
                <div class="list" id="workstationsList">
                    <!-- å‹•æ…‹è¼‰å…¥ -->
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">âš ï¸ ç³»çµ±è­¦å‘Š</div>
                </div>
                <div class="list" id="alertsList">
                    <div class="list-item">
                        <div>
                            <div class="list-item-title">å·¥ä½œç«™ D é€²å…¥ç¶­è­·æ¨¡å¼</div>
                            <div class="list-item-subtitle">5 åˆ†é˜å‰</div>
                        </div>
                        <div class="badge warning">ç¶­è­·</div>
                    </div>
                    <div class="list-item">
                        <div>
                            <div class="list-item-title">API å›æ‡‰æ™‚é–“è¼ƒæ…¢</div>
                            <div class="list-item-subtitle">12 åˆ†é˜å‰</div>
                        </div>
                        <div class="badge warning">æ•ˆèƒ½</div>
                    </div>
                    <div class="list-item">
                        <div>
                            <div class="list-item-title">è¨˜æ†¶é«”ä½¿ç”¨ç‡åé«˜</div>
                            <div class="list-item-subtitle">25 åˆ†é˜å‰</div>
                        </div>
                        <div class="badge warning">è³‡æº</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åœ–è¡¨å’Œæ—¥èªŒ -->
        <div class="grid">
            <div class="card grid-wide">
                <div class="card-header">
                    <div class="card-title">ğŸ“Š æ•ˆèƒ½è¶¨å‹¢åœ–è¡¨</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary">1å°æ™‚</button>
                        <button class="btn btn-primary">24å°æ™‚</button>
                        <button class="btn btn-secondary">7å¤©</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="performanceChart" class="chart"></canvas>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ“‹ å³æ™‚æ—¥èªŒ</div>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="clearLogs()">æ¸…ç©º</button>
                    </div>
                </div>
                <div class="terminal" id="logTerminal">
                    <div class="terminal-line info">[INFO] ç³»çµ±å•Ÿå‹•å®Œæˆ</div>
                    <div class="terminal-line success">[SUCCESS] API æœå‹™å™¨æ­£å¸¸é‹è¡Œ</div>
                    <div class="terminal-line info">[INFO] å·¥ä½œç«™ A ç‹€æ…‹æ›´æ–°</div>
                    <div class="terminal-line warning">[WARNING] å·¥ä½œç«™ D é€²å…¥ç¶­è­·æ¨¡å¼</div>
                    <div class="terminal-line info">[INFO] ç”¨æˆ¶ admin ç™»å…¥ç³»çµ±</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">âš™ï¸ ç³»çµ±æ§åˆ¶</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn btn-primary" onclick="runSystemDiagnosis()">
                        ğŸ¥ åŸ·è¡Œç³»çµ±è¨ºæ–·
                    </button>
                    <button class="btn btn-secondary" onclick="restartServices()">
                        ğŸ”„ é‡å•Ÿæœå‹™
                    </button>
                    <button class="btn btn-secondary" onclick="clearCache()">
                        ğŸ§¹ æ¸…ç†å¿«å–
                    </button>
                    <button class="btn btn-secondary" onclick="exportLogs()">
                        ğŸ“¤ å°å‡ºæ—¥èªŒ
                    </button>
                    <button class="btn btn-secondary" onclick="backupSystem()">
                        ğŸ’¾ ç³»çµ±å‚™ä»½
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8847';
        let performanceChart;
        let refreshInterval;

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeMonitoring();
            initializePerformanceChart();
            startRefreshTimer();
            updateCurrentTime();
        });

        // åˆå§‹åŒ–ç›£æ§
        function initializeMonitoring() {
            loadAPIEndpoints();
            loadWorkstations();
            loadSystemStats();
        }

        // è¼‰å…¥ API ç«¯é»ç‹€æ…‹
        async function loadAPIEndpoints() {
            const endpoints = [
                { path: '/health', name: 'å¥åº·æª¢æŸ¥' },
                { path: '/api', name: 'API è³‡è¨Š' },
                { path: '/api/workstations', name: 'å·¥ä½œç«™åˆ—è¡¨' },
                { path: '/api/work-orders', name: 'å·¥å–®åˆ—è¡¨' },
                { path: '/api/production/stats', name: 'ç”Ÿç”¢çµ±è¨ˆ' }
            ];

            const container = document.getElementById('apiEndpoints');
            container.innerHTML = '';

            for (const endpoint of endpoints) {
                const status = await checkEndpointStatus(endpoint.path);
                const listItem = document.createElement('div');
                listItem.className = 'list-item';
                listItem.innerHTML = `
                    <div>
                        <div class="list-item-title">${endpoint.name}</div>
                        <div class="list-item-subtitle">${endpoint.path}</div>
                    </div>
                    <div class="badge ${status.success ? 'success' : 'danger'}">
                        ${status.success ? 'æ­£å¸¸' : 'ç•°å¸¸'} ${status.responseTime}ms
                    </div>
                `;
                container.appendChild(listItem);
            }
        }

        // æª¢æŸ¥ç«¯é»ç‹€æ…‹
        async function checkEndpointStatus(path) {
            try {
                const startTime = Date.now();
                const response = await fetch(`${API_BASE}${path}`);
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                return {
                    success: response.ok,
                    responseTime,
                    status: response.status
                };
            } catch (error) {
                return {
                    success: false,
                    responseTime: 0,
                    error: error.message
                };
            }
        }

        // è¼‰å…¥å·¥ä½œç«™ç‹€æ…‹
        async function loadWorkstations() {
            try {
                const response = await fetch(`${API_BASE}/api/workstations`);
                const data = await response.json();
                
                const container = document.getElementById('workstationsList');
                container.innerHTML = '';

                if (data.success && data.data) {
                    data.data.forEach(ws => {
                        const listItem = document.createElement('div');
                        listItem.className = 'list-item';
                        listItem.innerHTML = `
                            <div>
                                <div class="list-item-title">${ws.name}</div>
                                <div class="list-item-subtitle">
                                    æ“ä½œå“¡: ${ws.operator || 'ç„¡'} | æ•ˆç‡: ${ws.efficiency || 0}%
                                </div>
                            </div>
                            <div class="badge ${getWorkstationStatusClass(ws.status)}">
                                ${getWorkstationStatusText(ws.status)}
                            </div>
                        `;
                        container.appendChild(listItem);
                    });
                }
            } catch (error) {
                console.error('è¼‰å…¥å·¥ä½œç«™å¤±æ•—:', error);
            }
        }

        function getWorkstationStatusClass(status) {
            switch (status) {
                case 'active': return 'success';
                case 'idle': return 'warning';
                case 'maintenance': return 'danger';
                default: return 'secondary';
            }
        }

        function getWorkstationStatusText(status) {
            switch (status) {
                case 'active': return 'é‹è¡Œä¸­';
                case 'idle': return 'é–’ç½®';
                case 'maintenance': return 'ç¶­è­·ä¸­';
                default: return 'æœªçŸ¥';
            }
        }

        // è¼‰å…¥ç³»çµ±çµ±è¨ˆ
        async function loadSystemStats() {
            // æ¨¡æ“¬ç³»çµ±è³‡æºæ•¸æ“š
            const stats = {
                cpu: Math.floor(Math.random() * 30) + 20,
                memory: Math.floor(Math.random() * 30) + 50,
                disk: Math.floor(Math.random() * 20) + 40,
                connections: Math.floor(Math.random() * 10) + 8
            };

            document.getElementById('cpuUsage').textContent = `${stats.cpu}%`;
            document.getElementById('memoryUsage').textContent = `${stats.memory}%`;
            document.getElementById('diskUsage').textContent = `${stats.disk}%`;
            document.getElementById('connections').textContent = stats.connections;

            // æ›´æ–°é€²åº¦æ¢
            document.querySelector('.stat-item .progress-bar').style.width = `${stats.cpu}%`;
        }

        // åˆå§‹åŒ–æ•ˆèƒ½åœ–è¡¨
        function initializePerformanceChart() {
            const canvas = document.getElementById('performanceChart');
            const ctx = canvas.getContext('2d');
            
            // ç°¡å–®çš„å³æ™‚åœ–è¡¨å¯¦ç¾
            const data = {
                labels: [],
                datasets: [{
                    label: 'CPU ä½¿ç”¨ç‡',
                    data: [],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    fill: true
                }, {
                    label: 'è¨˜æ†¶é«”ä½¿ç”¨ç‡',
                    data: [],
                    borderColor: '#f59e0b',
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    fill: true
                }]
            };

            // ç”Ÿæˆåˆå§‹æ•¸æ“š
            for (let i = 0; i < 30; i++) {
                data.labels.push(`${i}åˆ†`);
                data.datasets[0].data.push(Math.random() * 50 + 20);
                data.datasets[1].data.push(Math.random() * 40 + 40);
            }

            drawChart(canvas, data);
        }

        // ç¹ªè£½åœ–è¡¨
        function drawChart(canvas, data) {
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            // ç°¡å–®çš„ç·šæ¢åœ–å¯¦ç¾
            data.datasets.forEach((dataset, index) => {
                ctx.beginPath();
                ctx.strokeStyle = dataset.borderColor;
                ctx.lineWidth = 2;

                const pointCount = dataset.data.length;
                const stepX = width / (pointCount - 1);

                dataset.data.forEach((value, i) => {
                    const x = i * stepX;
                    const y = height - (value / 100 * height);

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });

                ctx.stroke();
            });
        }

        // åˆ·æ–°åŠŸèƒ½
        function refreshSystemStats() {
            const loading = document.getElementById('systemLoading');
            loading.style.display = 'inline-block';
            
            setTimeout(() => {
                loadSystemStats();
                loading.style.display = 'none';
            }, 1000);
        }

        function refreshWorkstations() {
            loadWorkstations();
        }

        function testAllEndpoints() {
            loadAPIEndpoints();
            addLog('info', 'æ­£åœ¨æ¸¬è©¦æ‰€æœ‰ API ç«¯é»...');
        }

        // ç³»çµ±æ§åˆ¶åŠŸèƒ½
        function runSystemDiagnosis() {
            addLog('info', 'é–‹å§‹åŸ·è¡Œç³»çµ±è¨ºæ–·...');
            setTimeout(() => {
                addLog('success', 'ç³»çµ±è¨ºæ–·å®Œæˆ - å¥åº·åº¦: 85%');
            }, 2000);
        }

        function restartServices() {
            if (confirm('ç¢ºå®šè¦é‡å•Ÿæœå‹™å—ï¼Ÿé€™å°‡æš«æ™‚ä¸­æ–·æœå‹™ã€‚')) {
                addLog('warning', 'æ­£åœ¨é‡å•Ÿç³»çµ±æœå‹™...');
                setTimeout(() => {
                    addLog('success', 'æœå‹™é‡å•Ÿå®Œæˆ');
                }, 3000);
            }
        }

        function clearCache() {
            addLog('info', 'æ­£åœ¨æ¸…ç†ç³»çµ±å¿«å–...');
            setTimeout(() => {
                addLog('success', 'å¿«å–æ¸…ç†å®Œæˆ');
            }, 1000);
        }

        function exportLogs() {
            addLog('info', 'æ­£åœ¨å°å‡ºç³»çµ±æ—¥èªŒ...');
            setTimeout(() => {
                addLog('success', 'æ—¥èªŒå°å‡ºå®Œæˆ: logs_export.zip');
            }, 2000);
        }

        function backupSystem() {
            addLog('info', 'é–‹å§‹ç³»çµ±å‚™ä»½...');
            setTimeout(() => {
                addLog('success', 'ç³»çµ±å‚™ä»½å®Œæˆ');
            }, 5000);
        }

        // æ—¥èªŒç®¡ç†
        function addLog(type, message) {
            const terminal = document.getElementById('logTerminal');
            const timestamp = new Date().toLocaleTimeString('zh-TW');
            const logLine = document.createElement('div');
            logLine.className = `terminal-line ${type}`;
            logLine.textContent = `[${timestamp}] [${type.toUpperCase()}] ${message}`;
            
            terminal.appendChild(logLine);
            terminal.scrollTop = terminal.scrollHeight;

            // é™åˆ¶æ—¥èªŒè¡Œæ•¸
            const maxLines = 50;
            const lines = terminal.children;
            if (lines.length > maxLines) {
                terminal.removeChild(lines[0]);
            }
        }

        function clearLogs() {
            document.getElementById('logTerminal').innerHTML = '';
            addLog('info', 'æ—¥èªŒå·²æ¸…ç©º');
        }

        // å®šæ™‚åˆ·æ–°
        function startRefreshTimer() {
            refreshInterval = setInterval(() => {
                loadSystemStats();
                
                // éš¨æ©Ÿæ·»åŠ æ—¥èªŒ
                if (Math.random() < 0.3) {
                    const logTypes = ['info', 'success', 'warning'];
                    const messages = [
                        'å·¥ä½œç«™ç‹€æ…‹æ›´æ–°',
                        'ç”Ÿç”¢æ•¸æ“šåŒæ­¥å®Œæˆ',
                        'API è«‹æ±‚è™•ç†å®Œæˆ',
                        'ç”¨æˆ¶æ´»å‹•è¨˜éŒ„',
                        'ç³»çµ±æ•ˆèƒ½æ­£å¸¸'
                    ];
                    
                    const type = logTypes[Math.floor(Math.random() * logTypes.length)];
                    const message = messages[Math.floor(Math.random() * messages.length)];
                    
                    addLog(type, message);
                }
            }, 5000);
        }

        // æ›´æ–°æ™‚é–“
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = 
                now.toLocaleTimeString('zh-TW');
            
            setTimeout(updateCurrentTime, 1000);
        }

        // å…¨è¢å¹•åŠŸèƒ½
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                document.getElementById('fullscreenIcon').textContent = 'â';
            } else {
                document.exitFullscreen();
                document.getElementById('fullscreenIcon').textContent = 'â›¶';
            }
        }

        // éµç›¤å¿«æ·éµ
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch (e.key) {
                    case 'r':
                        e.preventDefault();
                        refreshSystemStats();
                        refreshWorkstations();
                        break;
                    case 'd':
                        e.preventDefault();
                        runSystemDiagnosis();
                        break;
                    case 'l':
                        e.preventDefault();
                        clearLogs();
                        break;
                }
            }
        });

        // åˆå§‹æ—¥èªŒ
        addLog('success', 'FUCO ç›£æ§ä¸­å¿ƒå·²å•Ÿå‹•');
        addLog('info', 'æ‰€æœ‰ç›£æ§æ¨¡çµ„å·²è¼‰å…¥');
    </script>
</body>
</html>